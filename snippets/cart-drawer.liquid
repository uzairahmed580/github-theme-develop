{% comment %}
Renders cart drawer

Usage:
{% render 'cart-drawer' %}
{% endcomment %}

<script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>

<style>
  .drawer {
    visibility: hidden;
  }
  .cart-secure-btn{
    display:flex;
    width:100%;
    position:relative;
  }
  #secureIconSpan {
    display: none; 
    position:absolute;
    right:17%;
    top:8%;
  }
  cart-drawer .sneaker_wipes_box{
    font-size: 12px;
    font-weight: 600;
    color: #8d8d8d;
    font-family: 'termina-medium';
  }
</style>

<cart-drawer class="drawer{% if cart == empty %} is-empty{% endif %}">
  <div id="CartDrawer" class="cart-drawer">
    <div id="CartDrawer-Overlay" class="cart-drawer__overlay"></div>
    <div
      class="drawer__inner"
      role="dialog"
      aria-modal="true"
      aria-label="{{ 'sections.cart.title' | t }}"
      tabindex="-1">
      {%- if cart == empty -%}
        
        <div class="drawer__inner-empty ">
          <div class="cart-drawer__warnings center{% if settings.cart_drawer_collection != blank %} cart-drawer__warnings--has-collection{% endif %}">
            
            <div class="cart-drawer__empty-content">
              <h2 class="cart__empty-text">{{ 'sections.cart.empty' | t }}</h2>
              <button class="drawer__close"
                type="button"
                onclick="this.closest('cart-drawer').close()"
                aria-label="{{ 'accessibility.close' | t }}">
                {% comment %} {% render 'icon-close' %} {% endcomment %}
                {% render 'icon-cart-close' %}
              </button>
              <a href="https://www.kyxsneakers.com/search" class="button">
                {{ 'general.continue_shopping' | t }}
              </a>
              
              <div class="cart_note_header">Why sneaker lovers trust KYX</div>
              <div class="drawer__scroll">
                <div class="cart__drawer_note">
                  <div>
                    <img src="https://cdn.shopify.com/s/files/1/0720/7819/7049/files/Icon_Authentic_Inner-100_bd727e60-958c-462c-90ef-b2f6b66a9d2a.jpg?v=1694434127" width="65px" height="65px">
                  </div>
                  <div class="carts__notes">
                    <span> Authentication Promise </span>
                    <p> Every pair of shoes goes through our authentication process that is led by Entrupy, which is the most accurate sneaker authentication in the industry. </p>
                  </div>
                </div>
                <div class="cart__drawer_note">
                  <div>
                    <img src="https://cdn.shopify.com/s/files/1/0720/7819/7049/files/Icon_Clean_Inner-100_71122c5b-c5cb-4dfc-b8b7-5fe805111103.jpg?v=1694434302" width="65px" height="65px">
                  </div>
                  <div class="carts__notes">
                    <span> Pro-Cleaned </span>
                    <p> Every sneaker is thoroughly cleaned from the outsole to the insole. These shoes may have been pre-worn, but they are cleaned as close to new as they can be. </p>
                  </div>
                </div>
                <div class="cart__drawer_note">
                  <div>
                    <img src="https://cdn.shopify.com/s/files/1/0720/7819/7049/files/Icon_Rated_Inner-100.jpg?v=1694434380" width="65px" height="65px">
                  </div>
                  <div class="carts__notes">
                    <span> KYX Rated </span>
                    <p> We rate every pair of sneakers with our custom KYX Rating so you know exactly what you are getting. And most of our customers say the shoe is better than they thought it was going to be! </p>
                  </div>
                </div>
                <div class="cart__drawer_note">
                  <div>
                    <img src="https://cdn.shopify.com/s/files/1/0720/7819/7049/files/icon_QuickShip_Inner-100.jpg?v=1694437953" width="65px" height="65px">
                  </div>
                  <div class="carts__notes">
                    <span> Shipped Same Day </span>
                    <p>We’ve already done all the work and taken all of our sneakers through our KYX process. So when you click “Buy”, they’ll get to you quicker. </p>
                  </div>
                </div>
              </div>

          {% comment %}
                {%- if shop.customer_accounts_enabled and customer == null -%}
                  <p class="cart__login-title h3">{{ 'sections.cart.login.title' | t }}</p>
                  <p class="cart__login-paragraph">
                    {{ 'sections.cart.login.paragraph_html' | t: link: routes.account_login_url }}
                  </p>
                {%- endif -%}
          {% endcomment %}
            </div>
           
          </div>
          {%- if settings.cart_drawer_collection != blank -%}
            <div class="cart-drawer__collection">
              {% render 'card-collection', card_collection: settings.cart_drawer_collection, columns: 1 %}
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}
      <div class="drawer__header">
        <h2 class="drawer__heading">{{ 'sections.cart.title' | t }}</h2>
        <button class="drawer__close"
          type="button"
          onclick="this.closest('cart-drawer').close()"
          aria-label="{{ 'accessibility.close' | t }}">
          {% comment %} {% render 'icon-close' %} {% endcomment %}
          {% render 'icon-cart-close' %}
        </button>
        
        {% if cart.item_count > 0 %}
          {% assign min_number = 1 %}
          {% assign max_number = 3 %}
          {% assign diff = max_number | minus: min_number %}
          {% assign randomNumber = "now" | date: "%N" | modulo: diff | plus: min_number %}
          
          {% for i in (1..3) %}
            <div class="carts_notes" {% if i == randomNumber %}style="display:block"{% else %}style="display:none"{% endif %}>
              {% if i == 1 %}
                <p >You're going to love these! <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  width="18px" height="18px" viewBox="0 0 36 36" aria-hidden="true" role="img" class="iconify iconify--twemoji" preserveAspectRatio="xMidYMid meet"><path fill="#e5337c" d="M35.885 11.833c0-5.45-4.418-9.868-9.867-9.868c-3.308 0-6.227 1.633-8.018 4.129c-1.791-2.496-4.71-4.129-8.017-4.129c-5.45 0-9.868 4.417-9.868 9.868c0 .772.098 1.52.266 2.241C1.751 22.587 11.216 31.568 18 34.034c6.783-2.466 16.249-11.447 17.617-19.959c.17-.721.268-1.469.268-2.242z"/></svg></p>
              {% elsif i == 2 %}
                <p>You're going to look good in these! <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  width="18px" height="18px" viewBox="0 0 36 36" aria-hidden="true" role="img" class="iconify iconify--twemoji" preserveAspectRatio="xMidYMid meet"><path fill="#e5337c" d="M35.885 11.833c0-5.45-4.418-9.868-9.867-9.868c-3.308 0-6.227 1.633-8.018 4.129c-1.791-2.496-4.71-4.129-8.017-4.129c-5.45 0-9.868 4.417-9.868 9.868c0 .772.098 1.52.266 2.241C1.751 22.587 11.216 31.568 18 34.034c6.783-2.466 16.249-11.447 17.617-19.959c.17-.721.268-1.469.268-2.242z"/></svg> </p>
              {% else %}
                <p>You can't go wrong with these! <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  width="18px" height="18px" viewBox="0 0 36 36" aria-hidden="true" role="img" class="iconify iconify--twemoji" preserveAspectRatio="xMidYMid meet"><path fill="#e5337c" d="M35.885 11.833c0-5.45-4.418-9.868-9.867-9.868c-3.308 0-6.227 1.633-8.018 4.129c-1.791-2.496-4.71-4.129-8.017-4.129c-5.45 0-9.868 4.417-9.868 9.868c0 .772.098 1.52.266 2.241C1.751 22.587 11.216 31.568 18 34.034c6.783-2.466 16.249-11.447 17.617-19.959c.17-.721.268-1.469.268-2.242z"/></svg></p>
              {% endif %}
            </div>
          {% endfor%}
      {% endif%}
      </div>
     
      
      {% assign snekers_wipes_upsell = false %}
      
      <cart-drawer-items data-count="{{ cart.item_count }}" {% if cart == empty %}class=" is-empty"{% endif %}>
       <form
          action="{{ routes.cart_url }}"
          id="CartDrawer-Form"
          class="cart__contents cart-drawer__form"
          method="post">
          <div id="CartDrawer-CartItems" class="drawer__contents js-contents">
            {%- if cart != empty -%}
              <div class="drawer__cart-items-wrapper {% if cart.item_count == 1 %}show_cart{% endif %}">
                <table class="cart-items" role="table">
                  {% comment %} <thead role="rowgroup">
                  <tr role="row">
                  <th id="CartDrawer-ColumnProductImage" role="columnheader">
                  <span class="visually-hidden">{{ 'sections.cart.headings.image' | t }}</span>
                  </th>
                  <th
                  id="CartDrawer-ColumnProduct"
                  class="caption-with-letter-spacing"
                  scope="col"
                  role="columnheader"
                  >
                  {{ 'sections.cart.headings.product' | t }}
                  </th>
                  <th
                  id="CartDrawer-ColumnTotal"
                  class="right caption-with-letter-spacing"
                  scope="col"
                  role="columnheader"
                  >
                  {{ 'sections.cart.headings.total' | t }}
                  </th>
                  <th id="CartDrawer-ColumnQuantity" role="columnheader">
                  <span class="visually-hidden">{{ 'sections.cart.headings.quantity' | t }}</span>
                  </th>
                  </tr>
                  </thead> {% endcomment %}

                  <tbody role="rowgroup">
                    <div class="cart_items_count">
                      <span>{% if cart.item_count == 1 %}{{ cart.item_count}} Item {% else %} {{ cart.item_count}} Items {% endif %}</span>
                    </div>
                    {%- for item in cart.items -%}
                      {% if item.product.handle == "kyx-sneaker-wipes" %}
                        {% assign snekers_wipes_upsell = true %}
                      {% endif %}
                      {% if item.product.id == 8572334506297 or  item.product.id == 8572333719865 or item.product.handle == 'kyx-sneaker-wipes' %}
                        <tr
                          id="CartDrawer-Item-{{ item.index | plus: 1 }}"
                          class="cart-item subcribe_product {% if forloop.last %} border-none {% endif %}"
                          role="row">
                          
                          <td
                            class="cart-item__media"
                            role="cell"
                            headers="CartDrawer-ColumnProductImage">
                            {% if item.image %}
                              {% comment %} Leave empty space due to a:empty CSS display: none rule {% endcomment %}
                              <a
                                href="{{ item.url }}"
                                class="cart-item__link"
                                tabindex="-1"
                                aria-hidden="true"></a>
                              <img
                                class="cart-item__image"
                                src="{{ item.image | image_url: width: 300 }}"
                                alt="{{ item.image.alt | escape }}"
                                loading="lazy"
                                width="150"
                                height="{{ 150 | divided_by: item.image.aspect_ratio | ceil }}">
                            {% endif %}
                            <cart-remove-button
                              id="CartDrawer-Remove-{{ item.index | plus: 1 }}"
                              data-index="{{ item.index | plus: 1 }}"
                              data-product-id="{{ item.product.id }}"
                              data-variant-id="{{ item.id }}">
                              <button
                                type="button"
                                class="button button--tertiary"
                                aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  width="30"
                                  height="30"
                                  viewBox="0 0 30 30">
                                  <g
                                    id="Group_1"
                                    data-name="Group 1"
                                    transform="translate(-203 -202)">
                                    <circle
                                      id="Ellipse_16"
                                      data-name="Ellipse 16"
                                      cx="14.5"
                                      cy="14.5"
                                      r="14.5"
                                      transform="translate(203.5 202.5)"
                                      fill="#fff"
                                      stroke="#8d8d8d"
                                      stroke-width="1" />
                                    <g
                                      id="Group_86"
                                      data-name="Group 86"
                                      transform="translate(212 211)">
                                      <path
                                        id="Path_1"
                                        data-name="Path 1"
                                        d="M1.632,1,13,13"
                                        transform="translate(-1 -1)"
                                        fill="none"
                                        stroke="#8d8d8d"
                                        stroke-width="1.5" />
                                      <path
                                        id="Path_2"
                                        data-name="Path 2"
                                        d="M12.368,1,1,13"
                                        transform="translate(-1 -1)"
                                        fill="none"
                                        stroke="#8d8d8d"
                                        stroke-width="1.5" />
                                    </g>
                                  </g>
                                </svg>
                              </button>
                            </cart-remove-button>
                          </td>
                          <td
                            class="cart-item__details"
                            role="cell"
                            headers="CartDrawer-ColumnProduct">
                            <a href="{{ item.url }}" class="cart-item__name h4 break {% if item.product.handle == 'kyx-sneaker-wipes' %}cart-snekers-wips{% endif %}">
                              {{- item.product.title | escape | truncate: 45 -}}
                            </a>
                            {%- if item.original_price != item.final_price -%}
                              <div class="cart-item__discounted-prices">
                                <span class="visually-hidden">
                                  {{ 'products.product.price.regular_price' | t }}
                                </span>
                                <s class="cart-item__old-price product-option">
                                  {{- item.original_price | money -}}
                                </s>
                                <span class="visually-hidden">
                                  {{ 'products.product.price.sale_price' | t }}
                                </span>
                                <strong class="cart-item__final-price product-option">
                                  {{ item.final_price | money }}
                                </strong>
                              </div>
                            {%- else -%}
                              <div class="sneaker_wipes_box">  {% if item.product.handle == "kyx-sneaker-wipes" %}Box of 15 Wipes{% endif%}</div>
                              <div class="product-option">
                                {{ item.original_price | money }}
                              </div>
                            {%- endif -%}

                         
                            <div class="cart-item__quantity close_btn"
                              role="cell"
                              headers="CartDrawer-ColumnQuantity">
                              {% comment %}<timer-cart
                              class="timer cart_product-timer item__timer--{{ item.id }}"
                              data-productId="{{ item.product.id }}"
                              id="item__timer--{{ item.id }}" style="display:none"></timer-cart>{% endcomment %}
                              <div class="clean_cart_iteam">
                                {% comment %} <span>{% if item.product.handle == 'kyx-sneaker-wipes' %}KYX SNEAKER WIPES{% else%}KYX PRO-CLEAN+{% endif %}</span> {% endcomment %}
                                <div class="cart-item__quantity-wrapper ">
  
                                  <quantity-input class="quantity cart-quantity">
                                    <button
                                      class="quantity__button no-js-hidden qty-btn-minus"
                                      name="minus"
                                      type="button">
                                      <span class="visually-hidden">
                                        {{- 'products.product.quantity.decrease' | t: product: item.product.title | escape -}}
                                      </span>
                                      {% render 'icon-minus' %}
                                    </button>
                                    <input
                                      class="quantity__input"
                                      type="number"
                                      data-quantity-variant-id="{{ item.variant.id }}"
                                      name="updates[]"
                                      value="{{ item.quantity }}"
                                      {% # theme-check-disable %}
                                      data-cart-quantity="{{ cart | item_count_for_variant: item.variant.id }}"
  
                                      min="{{ item.variant.quantity_rule.min }}"
                                      {% if item.variant.quantity_rule.max != null %}max="{{ item.variant.quantity_rule.max }}"{% endif %}step="{{ item.variant.quantity_rule.increment }}"{% # theme-check-enable %}aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"id="Drawer-quantity-{{ item.index | plus: 1 }}"data-index="{{ item.index | plus: 1 }}">
                                    <button
                                      class="quantity__button no-js-hidden qty-btn-plus"
                                      name="plus"
                                      type="button">
                                      <span class="visually-hidden">
                                        {{- 'products.product.quantity.increase' | t: product: item.product.title | escape -}}
                                      </span>
                                      {% render 'icon-plus' %}
                                    </button>
                                  </quantity-input>
                                  {% comment %}
                                  <cart-remove-button id="CartDrawer-Remove-{{ item.index | plus: 1 }}" data-index="{{ item.index | plus: 1 }}">
                                  <button
                                  type="button"
                                  class="button button--tertiary"
                                  aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">
                                  {% render 'icon-remove' %}
                                  </button>
                                  </cart-remove-button>
                                  {% endcomment %}
                                </div>
                              </div>
  
                              {% comment %} <div
                                id="CartDrawer-LineItemError-{{ item.index | plus: 1 }}"
                                class="cart-item__error"
                                role="alert">
                                <small class="cart-item__error-text"></small>
                                <svg
                                  aria-hidden="true"
                                  focusable="false"
                                  class="icon icon-error"
                                  viewBox="0 0 13 13">
                                  <circle
                                    cx="6.5"
                                    cy="6.50049"
                                    r="5.5"
                                    stroke="white"
                                    stroke-width="2" />
                                  <circle
                                    cx="6.5"
                                    cy="6.5"
                                    r="5.5"
                                    fill="#EB001B"
                                    stroke="#EB001B"
                                    stroke-width="0.7" />
                                  <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white" />
                                  <path
                                    d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z"
                                    fill="white"
                                    stroke="#EB001B"
                                    stroke-width="0.7">
                                </svg>
                              </div> {% endcomment %}
  
                            </div>
                       
                          </td>
                          
                        </tr>
                      {% else %}
                     
                        <tr
                          id="CartDrawer-Item-{{ item.index | plus: 1 }}"
                          class="cart-item subcribe_product {% if forloop.last %} border-none {% endif %}"
                          role="row">
                         
                          <td
                            class="cart-item__media"
                            role="cell"
                            headers="CartDrawer-ColumnProductImage">

                            {% if item.image %}
                              {% comment %} Leave empty space due to a:empty CSS display: none rule {% endcomment %}
                              <a
                                href="{{ item.url }}"
                                class="cart-item__link"
                                tabindex="-1"
                                aria-hidden="true"></a>
                              <img
                                class="cart-item__image"
                                src="{{ item.image | image_url: width: 300 }}"
                                alt="{{ item.image.alt | escape }}"
                                loading="lazy"
                                width="150"
                                height="{{ 150 | divided_by: item.image.aspect_ratio | ceil }}">
                            {% endif %}

                            <timer-cart
                              class="timer cart_product-timer item__timer--{{ item.id }} 222"
                              data-productId="{{ item.product.id }}"
                              id="item__timer--{{ item.id }}"></timer-cart>
                            <cart-remove-button
                              id="CartDrawer-Remove-{{ item.index | plus: 1 }}"
                              data-index="{{ item.index | plus: 1 }}"
                              data-product-id="{{ item.product.id }}"
                              data-variant-id="{{ item.id }}">
                              <button
                                type="button"
                                class="button button--tertiary"
                                aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">
                                {% render 'icon-cart-remove' %}
                              </button>
                            </cart-remove-button>
                          </td>

                          <td
                            class="cart-item__details 21"
                            role="cell"
                            headers="CartDrawer-ColumnProduct">
                            {%- if settings.show_vendor -%}
                              <p class="caption-with-letter-spacing light">{{ item.product.vendor }}</p>
                            {%- endif -%}
                           
                            <a href="{{ item.url }}" class="cart-item__name h4 break">
                              {{- item.product.title | escape | truncate: 45 -}}
                            </a>
                            {% if item.product.title != 'KYX Gift Card' and item.vendor != 'Shoe Lace Supply' %}
                              <div class="cart-product_rating">
                                <p>KYX RTG: {{ item.product.metafields.custom.kyx_rating }}</p>
                              </div>
                              <div class="cart-product_size">
                                <div class="cart-product_size_title">SIZE :</div>
                                <div class="cart_size">
                                  {% for variant in item.product.variants %}
                                    {% if variant.option1 contains '/' %}
                                      {{ variant.option1 }}
                                    {% endif %}
                                  {% endfor %}
                                </div>
                              </div>
                            {% endif %}
                            {% if item.vendor == 'Shoe Lace Supply' %}
                             {% assign variant_parts = item.variant.title | split: ' / ' %}
                                {% if variant_parts.size > 1 %}
                                  <div class="cart-product_size">
                                    <div class="cart-product_size_title">Color:</div>
                                    <div class="cart_size">
                                      {{ variant_parts[0] }}
                                    </div>
                                  </div>
                                {% endif %}
                                
                                <div class="cart-product_size">
                                  <div class="cart-product_size_title">Length:</div>
                                  <div class="cart_size">
                                    {{ variant_parts.last }}
                                  </div>
                                </div>
                            {% endif %}

                            {%- if item.original_price != item.final_price -%}
                              <div class="cart-item__discounted-prices">
                                <span class="visually-hidden">
                                  {{ 'products.product.price.regular_price' | t }}
                                </span>
                                <s class="cart-item__old-price product-option">
                                  {{- item.original_price | money -}}
                                </s>
                                <span class="visually-hidden">
                                  {{ 'products.product.price.sale_price' | t }}
                                </span>
                                <strong class="cart-item__final-price product-option">
                                  {{ item.final_price | money }}
                                </strong>
                              </div>
                            {%- else -%}
                              <div class="product-option">
                                {{ item.original_price | money }}
                              </div>
                            {%- endif -%}
                            {%- for option in item.options_with_values -%}
                                  <div class="product-option product_details ">
                                    <dt>{{ option.name }}:</dt>
                                    <dd>{{ option.value }}</dd>
                                    {%- for property in item.properties -%}
                                      {%- assign property_first_char = property.first | slice: 0 -%}
                                      {%- if property.last != blank and property_first_char != '_' -%}
                                        <div class="product-option">
                                          <dt>{{ property.first }}:</dt>
                                          <dd>
                                            {%- if property.last contains '/uploads/' -%}
                                              <a href="{{ property.last }}" class="link" target="_blank">
                                                {{ property.last | split: '/' | last }}
                                              </a>
                                            {%- else -%}
                                              {{ property.last }}
                                            {%- endif -%}
                                          </dd>
                                        </div>      
                                      {%- endif -%}
                                    {%- endfor -%}
                                  </div>
                                {%- endfor -%}
                            
                                {% if item.product.handle == "kyx-gift-card" %}
                                <div class="gift_card_product">
                                  <div class="cart-item__quantity-wrapper">
    
                                    <quantity-input class="quantity cart-quantity">
                                      <button
                                        class="quantity__button no-js-hidden qty-btn-minus"
                                        name="minus"
                                        type="button">
                                        <span class="visually-hidden">
                                          {{- 'products.product.quantity.decrease' | t: product: item.product.title | escape -}}
                                        </span>
                                        {% render 'icon-minus' %}
                                      </button>
                                      <input
                                        class="quantity__input"
                                        type="number"
                                        data-quantity-variant-id="{{ item.variant.id }}"
                                        name="updates[]"
                                        value="{{ item.quantity }}"
                                        {% # theme-check-disable %}
                                        data-cart-quantity="{{ cart | item_count_for_variant: item.variant.id }}"
    
                                        min="{{ item.variant.quantity_rule.min }}"
                                        {% if item.variant.quantity_rule.max != null %}max="{{ item.variant.quantity_rule.max }}"{% endif %}step="{{ item.variant.quantity_rule.increment }}"{% # theme-check-enable %}aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"id="Drawer-quantity-{{ item.index | plus: 1 }}"data-index="{{ item.index | plus: 1 }}">
                                      <button
                                        class="quantity__button no-js-hidden qty-btn-plus"
                                        name="plus"
                                        type="button">
                                        <span class="visually-hidden">
                                          {{- 'products.product.quantity.increase' | t: product: item.product.title | escape -}}
                                        </span>
                                        {% render 'icon-plus' %}
                                      </button>
                                    </quantity-input>
                                  </div>
                                </div>
                              {% endif %}
                              {% if  item.product.vendor == "Shoe Lace Supply" %}
                                  <div class="clean_cart_iteam">
                                    <div class="cart-item__quantity-wrapper">
                                      <quantity-input class="quantity cart-quantity">
                                        <button
                                          class="quantity__button no-js-hidden qty-btn-minus"
                                          name="minus"
                                          type="button">
                                          <span class="visually-hidden">
                                            {{- 'products.product.quantity.decrease' | t: product: item.product.title | escape -}}
                                          </span>
                                          {% render 'icon-minus' %}
                                        </button>
                                        <input
                                          class="quantity__input"
                                          type="number"
                                          data-quantity-variant-id="{{ item.variant.id }}"
                                          name="updates[]"
                                          value="{{ item.quantity }}"
                                          {% # theme-check-disable %}
                                          data-cart-quantity="{{ cart | item_count_for_variant: item.variant.id }}"
      
                                          min="{{ item.variant.quantity_rule.min }}"
                                          {% if item.variant.quantity_rule.max != null %}max="{{ item.variant.quantity_rule.max }}"{% endif %}step="{{ item.variant.quantity_rule.increment }}"{% # theme-check-enable %}aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"id="Drawer-quantity-{{ item.index | plus: 1 }}"data-index="{{ item.index | plus: 1 }}">
                                        <button
                                          class="quantity__button no-js-hidden qty-btn-plus"
                                          name="plus"
                                          type="button">
                                          <span class="visually-hidden">
                                            {{- 'products.product.quantity.increase' | t: product: item.product.title | escape -}}
                                          </span>
                                          {% render 'icon-plus' %}
                                        </button>
                                      </quantity-input>
                                    </div>
                                  </div>
                              {% endif %}
                            <ul
                              class="discounts list-unstyled"
                              role="list"
                              aria-label="{{ 'customer.order.discount' | t }}">
                              {%- for discount in item.discounts -%}
                                <li class="discounts__discount">
                                  {%- render 'icon-discount' -%}
                                  {{ discount.title }}
                                </li>
                              {%- endfor -%}
                            </ul>
                          </td>

                        </tr>
                        <tr class="toastMsg--{{ item.product.handle }} toastMessage" style="display: none">
                          <td>
                            Product added to cart it will be removed after 10 mins
                            {{ item.product.title }}-{{ item.product.price | money_with_currency }}
                          </td>
                        </tr>
                      {% endif %}
                    {%- endfor -%}
                  </tbody>
                </table>
              </div>
            {%- endif -%}
            <p
              id="CartDrawer-LiveRegionText"
              class="visually-hidden"
              role="status"></p>
            <p
              id="CartDrawer-LineItemStatus"
              class="visually-hidden"
              aria-hidden="true"
              role="status">
              {{ 'accessibility.loading' | t }}
            </p>
          </div>
          <div id="CartDrawer-CartErrors" role="alert"></div>
        </form>
        <div id="shopCollectionEmpty" class="shopCollection {% if cart == empty %} hidden {% endif %} ">
          {% unless snekers_wipes_upsell  %}
          {%- if settings.enable_upsell -%}
              <div class="cart--upsell " id="cartUpsell">
              {%- if settings.upsell_title != blank -%}
                  <h6 class="upsell_title">{{ settings.upsell_title }}</h6>
              {%- endif -%}
                  {%- if settings.enable_upsell -%}
                <div class="collections-product hide">
                  <div class="collection--image">
                      {% if settings.collection_image != blank %}
                        <img src="{{ settings.collection_image | img_url }}" />
                      {%  endif %}
                  </div>
                    <div class="collections_details">
                       {% if settings.collcetion_product_title != blank %}
                           <h6 class="Collection_product_title">{{ settings.collcetion_product_title }}</h6>
                        {% endif %}
                      {% if settings.Add_btn != blank %}
                        <a href="{{ settings.collection_link }}">{{ settings.Add_btn }}</a>
                      {% endif %}
                    </div>
                </div>
                {%- endif -%}
              {%- assign grid_item_width = 'w-1/2 mb-0' -%}
                 {%- assign product = settings.select_product -%}
                  {% render 'cart-upsell', product: product, upsell: false, index: count %}
              </div>
          {%- endif -%}
        {% endunless %}
        </div>

          <div class="cart_note_header page-width {% if cart == empty %} hidden {% endif %}">Why sneaker lovers trust KYX</div>
        <div class="{% if cart == empty %} hidden {% endif %}">
          <div class="cart__drawer_note">
            <div>
              <img src="https://cdn.shopify.com/s/files/1/0720/7819/7049/files/Icon_Authentic_Inner-100_bd727e60-958c-462c-90ef-b2f6b66a9d2a.jpg?v=1694434127" width="65px" height="65px">
            </div>
            <div class="carts__notes">
              <span> Authentication Promise </span>
              <p> Every pair of shoes goes through our authentication process that is led by Entrupy, which is the most accurate sneaker authentication in the industry. </p>
            </div>
          </div>
          <div class="cart__drawer_note">
            <div>
              <img src="https://cdn.shopify.com/s/files/1/0720/7819/7049/files/Icon_Clean_Inner-100_71122c5b-c5cb-4dfc-b8b7-5fe805111103.jpg?v=1694434302" width="65px" height="65px">
            </div>
            <div class="carts__notes">
              <span> Pro-Cleaned </span>
              <p> Every sneaker is thoroughly cleaned from the outsole to the insole. These shoes may have been pre-worn, but they are cleaned as close to new as they can be. </p>
            </div>
          </div>
          <div class="cart__drawer_note">
            <div>
              <img src="https://cdn.shopify.com/s/files/1/0720/7819/7049/files/Icon_Rated_Inner-100.jpg?v=1694434380" width="65px" height="65px">
            </div>
            <div class="carts__notes">
              <span> KYX Rated </span>
              <p> We rate every pair of sneakers with our custom KYX Rating so you know exactly what you are getting. And most of our customers say the shoe is better than they thought it was going to be! </p>
            </div>
          </div>
          <div class="cart__drawer_note">
            <div>
              <img src="https://cdn.shopify.com/s/files/1/0720/7819/7049/files/icon_QuickShip_Inner-100.jpg?v=1694437953" width="65px" height="65px">
            </div>
            <div class="carts__notes">
              <span> Shipped Same Day </span>
              <p>We’ve already done all the work and taken all of our sneakers through our KYX process. So when you click “Buy”, they’ll get to you quicker. </p>
            </div>
          </div>
        </div>
       
        
      </cart-drawer-items>

      
      

      <div class="drawer__footer">
        {% if cart.total_price > 25000 %}
          <div class="eligible_price">
            <span>This order qualifies for free shipping. </span>
            <span><img src="https://cdn.shopify.com/s/files/1/0720/7819/7049/files/Parcel_icon-removebg-preview.png?v=1697627143" width="30px" height="30px" /></span>
          </div>
        {% endif %}
        {%- if settings.show_cart_note -%}
          <details id="Details-CartDrawer">
            <summary>
              <span class="summary__title">
                {{ 'sections.cart.note' | t }}
                {% render 'icon-caret' %}
              </span>
            </summary>
            <cart-note class="cart__note field">
              <label class="visually-hidden" for="CartDrawer-Note">{{ 'sections.cart.note' | t }}</label>
              <textarea
                id="CartDrawer-Note"
                class="text-area text-area--resize-vertical field__input"
                name="note"
                placeholder="{{ 'sections.cart.note' | t }}">{{ cart.note }}</textarea>
            </cart-note>
          </details>
        {%- endif -%}

        <!-- Start blocks -->
        <!-- Subtotals -->

        <div class="cart-drawer__footer" {{ block.shopify_attributes }}>
          <div class="totals" role="status">
            {% comment %} <h2 class="totals__subtotal">{{ 'sections.cart.subtotal' | t }}</h2> {% endcomment %}
            {% comment %} <p class="totals__subtotal-value">{{ cart.total_price | money_with_currency }}</p> {% endcomment %}
              <h2 class="totals__subtotal"> Total<br>
            </h2>
            <p class="totals__subtotal-value">{{ cart.total_price | money }}</p>
            
          </div>
          <p class="cart_subnote">(Taxes and shipping calculated at checkout)</p>
          <div>
            {%- if cart.cart_level_discount_applications.size > 0 -%}
              <ul
                class="discounts list-unstyled"
                role="list"
                aria-label="{{ 'customer.order.discount' | t }}">
                {%- for discount in cart.cart_level_discount_applications -%}
                  <li class="discounts__discount discounts__discount--end">
                    {%- render 'icon-discount' -%}
                    {{ discount.title }}
                    (-{{ discount.total_allocated_amount | money }})
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}
          </div>

          {% comment %} <small class="tax-note caption-large rte">
          {%- if cart.taxes_included and shop.shipping_policy.body != blank -%}
          {{ 'sections.cart.taxes_included_and_shipping_policy_html' | t: link: shop.shipping_policy.url }}
          {%- elsif cart.taxes_included -%}
          {{ 'sections.cart.taxes_included_but_shipping_at_checkout' | t }}
          {%- elsif shop.shipping_policy.body != blank -%}
          {{ 'sections.cart.taxes_and_shipping_policy_at_checkout_html' | t: link: shop.shipping_policy.url }}
          {%- else -%}
          {{ 'sections.cart.taxes_and_shipping_at_checkout' | t }}
          {%- endif -%}
          </small> {% endcomment %}
        </div>

        <!-- CTAs -->
        <div class="cart__ctas" {{ block.shopify_attributes }}>
          <noscript>
            <button
              type="submit"
              class="cart__update-button button button--secondary"
              form="CartDrawer-Form">
              {{ 'sections.cart.update' | t }}
            </button>
          </noscript>

          <div class="cart-secure-btn">
            <button
              type="submit"
              id="CartDrawer-Checkout"
              class="cart__checkout-button button"
              name="checkout"
              form="CartDrawer-Form"
              {% if cart == empty %}disabled{% endif %}>
            {{ 'sections.cart.checkout' | t }} 
            </button>
            <span id="secureIconSpan"><img src="https://cdn.shopify.com/s/files/1/0720/7819/7049/files/Lock_icon_8201b1cd-6db4-43e4-9620-f4b8eaba9a59.png?v=1697798458" width="60px" height="60px" alt="checkout-icon" />
            </span>
          </div>
        </div>
      </div>
    </div>
    
  </div>
</cart-drawer>

<script>
  
  document.addEventListener('DOMContentLoaded', function () {
    var cartNotes = document.querySelectorAll('.carts_notes');
    var randomIndex = Math.floor(Math.random() * 3);
    if(cartNotes.length != 0) {
      cartNotes.forEach(function (element) {
        element.style.display = 'none';
      });
      cartNotes[randomIndex].style.display = 'block';  
    }
    
  });

  document.addEventListener('DOMContentLoaded', function() {
    function isIE() {
      const ua = window.navigator.userAgent;
      const msie = ua.indexOf('MSIE ');
      const trident = ua.indexOf('Trident/');

      return msie > 0 || trident > 0;
    }

    if (! isIE()) 
      return;
    

    const cartSubmitInput = document.createElement('input');
    cartSubmitInput.setAttribute('name', 'checkout');
    cartSubmitInput.setAttribute('type', 'hidden');
    document.querySelector('#cart').appendChild(cartSubmitInput);
    document.querySelector('#checkout').addEventListener('click', function(event) {
      document.querySelector('#cart').submit();
    });
  });

  document.addEventListener("DOMContentLoaded", function() {
    var checkoutButton = document.getElementById('CartDrawer-Checkout');
    var secureIconSpan = document.getElementById('secureIconSpan');
    
    if (window.checkoutText == true) {
      checkoutButton.textContent = "Secure Checkout";
      secureIconSpan.style.display = 'block'; 
    }
    else{
      secureIconSpan.style.display = 'none';
    }
  });
  
</script>